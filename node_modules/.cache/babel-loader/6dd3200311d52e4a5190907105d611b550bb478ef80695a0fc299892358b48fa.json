{"ast":null,"code":"import React from\"react\";import{useTranslation}from\"react-i18next\";import LanguageSelector from\"./components/LanguageSelector\";import EnterButton from\"./components/EnterButton\";import{BrowserRouter as Router,Routes,Route,useNavigate}from\"react-router-dom\";import About from\"./pages/About\";import ConvertPage from\"./pages/ConvertPage\";import LicenseModal from'./components/LicenseModal';import LicenseBanner from'./components/LicenseBanner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function HomeCard(){const{t}=useTranslation();const navigate=useNavigate();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 flex flex-col items-center -mt-20 bg-white rounded-3xl shadow-2xl p-12 mx-8 max-w-4xl w-full border border-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl md:text-5xl font-extralight text-gray-500 mb-6 text-center tracking-wide\",children:t('appNameBo')}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl md:text-4xl font-light text-gray-500 mb-8 text-center tracking-wide\",children:t('appNameZh')}),/*#__PURE__*/_jsx(LanguageSelector,{}),/*#__PURE__*/_jsx(EnterButton,{onEnter:()=>navigate('/convert')}),/*#__PURE__*/_jsx(\"button\",{className:\"absolute bottom-3 right-4 px-3 py-1 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-modern-accent shadow focus:outline-none focus:ring-2 focus:ring-modern-accent focus:ring-opacity-50 text-sm font-medium\",onClick:()=>navigate('/about'),children:\"\\u5173\\u4E8E\\uFF08\\u0F51\\u0F7A\\u0F0B\\u0F60\\u0F56\\u0FB2\\u0F7A\\u0F63\\u0F0D\\uFF09\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-xs text-gray-400 text-center select-none\",children:\"\\xA9 2025.07.10 - \\u7248\\u672C 1.0.0\"})]});}export default function App(){const[licenseVisible,setLicenseVisible]=React.useState(false);const[expireDate,setExpireDate]=React.useState(null);React.useEffect(()=>{// 检查激活状态和试用期\nconst lic=localStorage.getItem('license');let valid=false;let exp=null;if(lic){try{const decoded=atob(lic.replace(/-/g,'+').replace(/_/g,'/'));const[ed,sign]=decoded.split('|');// 简单校验（与LicenseModal一致）\nconst CryptoJS=window.CryptoJS;if(CryptoJS){const expectedSign=CryptoJS.HmacSHA256(ed,'YangsaL2025SecretKey').toString().slice(0,16);if(sign===expectedSign){exp=ed;valid=new Date()<=new Date(ed);}}}catch{}}if(!valid)setLicenseVisible(true);setExpireDate(exp);},[]);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(LicenseBanner,{expireDate:expireDate}),/*#__PURE__*/_jsx(LicenseModal,{visible:licenseVisible,onActivated:ed=>{setExpireDate(ed);setLicenseVisible(false);},onClose:()=>setLicenseVisible(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full h-screen flex flex-col items-center justify-center bg-gradient-to-b from-gray-300 via-gray-100 to-white overflow-hidden\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomeCard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",element:/*#__PURE__*/_jsx(About,{})}),/*#__PURE__*/_jsx(Route,{path:\"/convert\",element:/*#__PURE__*/_jsx(ConvertPage,{})})]})})]});}","map":{"version":3,"names":["React","useTranslation","LanguageSelector","EnterButton","BrowserRouter","Router","Routes","Route","useNavigate","About","ConvertPage","LicenseModal","LicenseBanner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HomeCard","t","navigate","children","className","onEnter","onClick","App","licenseVisible","setLicenseVisible","useState","expireDate","setExpireDate","useEffect","lic","localStorage","getItem","valid","exp","decoded","atob","replace","ed","sign","split","CryptoJS","window","expectedSign","HmacSHA256","toString","slice","Date","visible","onActivated","onClose","path","element"],"sources":["/Users/gscr930/Documents/YangSal Font Encoding Converter/src/App.jsx"],"sourcesContent":["import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport LanguageSelector from \"./components/LanguageSelector\";\nimport EnterButton from \"./components/EnterButton\";\nimport { BrowserRouter as Router, Routes, Route, useNavigate } from \"react-router-dom\";\nimport About from \"./pages/About\";\nimport ConvertPage from \"./pages/ConvertPage\";\nimport LicenseModal from './components/LicenseModal';\nimport LicenseBanner from './components/LicenseBanner';\n\nfunction HomeCard() {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  return (\n    <>\n      <div className=\"relative z-10 flex flex-col items-center -mt-20 bg-white rounded-3xl shadow-2xl p-12 mx-8 max-w-4xl w-full border border-gray-100\">\n        <h2 className=\"text-3xl md:text-5xl font-extralight text-gray-500 mb-6 text-center tracking-wide\">\n          {t('appNameBo')}\n        </h2>\n        <h1 className=\"text-2xl md:text-4xl font-light text-gray-500 mb-8 text-center tracking-wide\">\n          {t('appNameZh')}\n        </h1>\n        <LanguageSelector />\n        <EnterButton onEnter={() => navigate('/convert')} />\n        {/* 关于按钮 */}\n        <button\n          className=\"absolute bottom-3 right-4 px-3 py-1 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-modern-accent shadow focus:outline-none focus:ring-2 focus:ring-modern-accent focus:ring-opacity-50 text-sm font-medium\"\n          onClick={() => navigate('/about')}\n        >\n          关于（དེ་འབྲེལ།）\n        </button>\n      </div>\n      <div className=\"mt-4 text-xs text-gray-400 text-center select-none\">\n        © 2025.07.10 - 版本 1.0.0\n      </div>\n    </>\n  );\n}\n\nexport default function App() {\n  const [licenseVisible, setLicenseVisible] = React.useState(false);\n  const [expireDate, setExpireDate] = React.useState(null);\n\n  React.useEffect(() => {\n    // 检查激活状态和试用期\n    const lic = localStorage.getItem('license');\n    let valid = false;\n    let exp = null;\n    if (lic) {\n      try {\n        const decoded = atob(lic.replace(/-/g, '+').replace(/_/g, '/'));\n        const [ed, sign] = decoded.split('|');\n        // 简单校验（与LicenseModal一致）\n        const CryptoJS = window.CryptoJS;\n        if (CryptoJS) {\n          const expectedSign = CryptoJS.HmacSHA256(ed, 'YangsaL2025SecretKey').toString().slice(0, 16);\n          if (sign === expectedSign) {\n            exp = ed;\n            valid = new Date() <= new Date(ed);\n          }\n        }\n      } catch {}\n    }\n    if (!valid) setLicenseVisible(true);\n    setExpireDate(exp);\n  }, []);\n\n  return (\n    <Router>\n      <LicenseBanner expireDate={expireDate} />\n      <LicenseModal visible={licenseVisible} onActivated={ed => { setExpireDate(ed); setLicenseVisible(false); }} onClose={() => setLicenseVisible(false)} />\n      <div className=\"relative w-full h-screen flex flex-col items-center justify-center bg-gradient-to-b from-gray-300 via-gray-100 to-white overflow-hidden\">\n        <Routes>\n          <Route path=\"/\" element={<HomeCard />} />\n          <Route path=\"/about\" element={<About />} />\n          <Route path=\"/convert\" element={<ConvertPage />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}