{"ast":null,"code":"import React,{useState,useEffect}from'react';import CryptoJS from'crypto-js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SECRET='YangsaL2025SecretKey';// 与生成脚本一致\nconst TRIAL_DAYS=30;function verifyCode(inputCode){try{const decoded=atob(inputCode.replace(/-/g,'+').replace(/_/g,'/'));const parts=decoded.split('|');if(parts.length!==5){return{valid:false,reason:'format'};}const[activationMarker,licenseType,days,maxUses,sign]=parts;// 检查是否是新的激活码格式\nif(activationMarker==='ACTIVATE_DATE'){const data=`${activationMarker}|${licenseType}|${days}|${maxUses}`;const expectedSign=CryptoJS.HmacSHA256(data,SECRET).toString().slice(0,16);if(sign===expectedSign){return{valid:true,licenseType,days:parseInt(days),maxUses:parseInt(maxUses)};}else{return{valid:false,reason:'invalid'};}}else{// 兼容旧的激活码格式\nreturn{valid:false,reason:'format'};}}catch{return{valid:false,reason:'format'};}}function getCodeUsageInfo(code){// 获取激活码使用信息\nconst usageInfo=JSON.parse(localStorage.getItem('codeUsage')||'{}');return usageInfo[code]||null;}function updateCodeUsage(code,activationDate){// 更新激活码使用信息\nconst usageInfo=JSON.parse(localStorage.getItem('codeUsage')||'{}');if(!usageInfo[code]){// 第一次使用\nusageInfo[code]={firstActivation:activationDate,useCount:1,lastUsed:activationDate};}else{// 后续使用\nusageInfo[code].useCount+=1;usageInfo[code].lastUsed=activationDate;}localStorage.setItem('codeUsage',JSON.stringify(usageInfo));return usageInfo[code];}function checkCodeValidity(code,maxUses,maxDays){// 检查激活码是否还能使用\nconst usageInfo=getCodeUsageInfo(code);if(!usageInfo){return{canUse:true,reason:'first_use'};}if(usageInfo.useCount>=maxUses){return{canUse:false,reason:'max_uses_reached',useCount:usageInfo.useCount};}// 检查是否过期（基于第一次激活时间）\nconst firstActivation=new Date(usageInfo.firstActivation);const now=new Date();const daysSinceFirstActivation=Math.floor((now-firstActivation)/(1000*60*60*24));if(daysSinceFirstActivation>=maxDays){return{canUse:false,reason:'expired',firstActivation:usageInfo.firstActivation};}return{canUse:true,reason:'valid',useCount:usageInfo.useCount,firstActivation:usageInfo.firstActivation,daysLeft:maxDays-daysSinceFirstActivation};}function getTrialInfo(){let trialStart=localStorage.getItem('trialStart');if(!trialStart){trialStart=new Date().toISOString();localStorage.setItem('trialStart',trialStart);}const start=new Date(trialStart);const now=new Date();const diff=Math.floor((now-start)/(1000*60*60*24));const left=TRIAL_DAYS-diff;const expireDate=new Date(start.getTime()+TRIAL_DAYS*24*60*60*1000);return{left,expireDate};}export default function LicenseModal(_ref){let{visible,onActivated,onClose}=_ref;const[input,setInput]=useState('');const[status,setStatus]=useState('');const[activated,setActivated]=useState(false);const[expireDate,setExpireDate]=useState(null);const[trial,setTrial]=useState(getTrialInfo());useEffect(()=>{// 检查本地激活状态\nconst lic=localStorage.getItem('license');if(lic){const res=verifyCode(lic);if(res.valid){setActivated(true);// 计算到期日期\nconst usageInfo=getCodeUsageInfo(lic);if(usageInfo){const firstActivation=new Date(usageInfo.firstActivation);const expireDt=new Date(firstActivation.getTime()+res.days*24*60*60*1000);setExpireDate(expireDt.toISOString().split('T')[0]);if(onActivated)onActivated(expireDt.toISOString().split('T')[0]);}}else{setActivated(false);setExpireDate(null);}}},[visible]);const handleActivate=()=>{const code=input.trim();// 验证激活码格式\nconst res=verifyCode(code);if(!res.valid){setStatus('fail');return;}// 检查激活码使用情况\nconst validity=checkCodeValidity(code,res.maxUses,res.days);if(!validity.canUse){if(validity.reason==='max_uses_reached'){setStatus('max_uses');}else if(validity.reason==='expired'){setStatus('expired');setExpireDate(validity.firstActivation);}return;}// 激活成功\nconst activationDate=new Date().toISOString().split('T')[0];updateCodeUsage(code,activationDate);// 保存激活信息\nlocalStorage.setItem('license',code);localStorage.setItem('activationDate',activationDate);localStorage.setItem('licenseType',res.licenseType);// 计算到期日期\nconst firstActivation=validity.firstActivation||activationDate;const firstActivationDt=new Date(firstActivation);const expireDt=new Date(firstActivationDt.getTime()+res.days*24*60*60*1000);const expireDateStr=expireDt.toISOString().split('T')[0];setActivated(true);setExpireDate(expireDateStr);setStatus('success');if(onActivated)onActivated(expireDateStr);};// 试用到期判断\nconst trialExpired=trial.left<=0;if(!visible)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-8 w-[90vw] max-w-xs border border-gray-100 relative\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-center mb-2 text-gray-700\",children:\"\\u8F6F\\u4EF6\\u6FC0\\u6D3B\"}),activated?/*#__PURE__*/_jsxs(\"div\",{className:\"text-green-600 text-center mb-4\",children:[\"\\u5DF2\\u6FC0\\u6D3B\\uFF0C\\u6709\\u6548\\u671F\\u81F3 \",/*#__PURE__*/_jsx(\"b\",{children:expireDate})]}):trialExpired?/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center mb-4\",children:\"\\u8BD5\\u7528\\u5DF2\\u5230\\u671F\\uFF0C\\u8BF7\\u8F93\\u5165\\u6FC0\\u6D3B\\u7801\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500 text-center mb-4\",children:[\"\\u5F53\\u524D\\u4E3A\\u8BD5\\u7528\\u7248\\uFF0C\\u5269\\u4F59 \",/*#__PURE__*/_jsx(\"b\",{children:trial.left}),\" \\u5929\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u5230\\u671F\\u540E\\u9700\\u8F93\\u5165\\u6FC0\\u6D3B\\u7801\\u7EE7\\u7EED\\u4F7F\\u7528\"]}),!activated&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full border rounded px-3 py-2 mb-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u6FC0\\u6D3B\\u7801\",value:input,onChange:e=>setInput(e.target.value),disabled:activated}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full bg-blue-500 text-white rounded py-2 font-medium hover:bg-blue-600 transition mb-2\",onClick:handleActivate,disabled:activated,children:\"\\u6FC0\\u6D3B\"}),status==='success'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-green-600 text-center text-xs\",children:\"\\u6FC0\\u6D3B\\u6210\\u529F\\uFF01\"}),status==='fail'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center text-xs\",children:\"\\u6FC0\\u6D3B\\u7801\\u65E0\\u6548\"}),status==='expired'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-orange-500 text-center text-xs\",children:\"\\u6FC0\\u6D3B\\u7801\\u5DF2\\u8FC7\\u671F\"}),status==='max_uses'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center text-xs\",children:\"\\u6FC0\\u6D3B\\u7801\\u4F7F\\u7528\\u6B21\\u6570\\u5DF2\\u8FBE\\u4E0A\\u9650\\uFF083\\u6B21\\uFF09\"})]}),activated&&/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-2 right-2 text-gray-400 hover:text-blue-500\",onClick:onClose,children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]})});}","map":{"version":3,"names":["React","useState","useEffect","CryptoJS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SECRET","TRIAL_DAYS","verifyCode","inputCode","decoded","atob","replace","parts","split","length","valid","reason","activationMarker","licenseType","days","maxUses","sign","data","expectedSign","HmacSHA256","toString","slice","parseInt","getCodeUsageInfo","code","usageInfo","JSON","parse","localStorage","getItem","updateCodeUsage","activationDate","firstActivation","useCount","lastUsed","setItem","stringify","checkCodeValidity","maxDays","canUse","Date","now","daysSinceFirstActivation","Math","floor","daysLeft","getTrialInfo","trialStart","toISOString","start","diff","left","expireDate","getTime","LicenseModal","_ref","visible","onActivated","onClose","input","setInput","status","setStatus","activated","setActivated","setExpireDate","trial","setTrial","lic","res","expireDt","handleActivate","trim","validity","firstActivationDt","expireDateStr","trialExpired","className","children","placeholder","value","onChange","e","target","disabled","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/Users/gscr930/Documents/YangSal Font Encoding Converter/src/components/LicenseModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport CryptoJS from 'crypto-js';\n\nconst SECRET = 'YangsaL2025SecretKey'; // 与生成脚本一致\nconst TRIAL_DAYS = 30;\n\nfunction verifyCode(inputCode) {\n  try {\n    const decoded = atob(inputCode.replace(/-/g, '+').replace(/_/g, '/'));\n    const parts = decoded.split('|');\n    \n    if (parts.length !== 5) {\n      return { valid: false, reason: 'format' };\n    }\n    \n    const [activationMarker, licenseType, days, maxUses, sign] = parts;\n    \n    // 检查是否是新的激活码格式\n    if (activationMarker === 'ACTIVATE_DATE') {\n      const data = `${activationMarker}|${licenseType}|${days}|${maxUses}`;\n      const expectedSign = CryptoJS.HmacSHA256(data, SECRET).toString().slice(0, 16);\n      \n      if (sign === expectedSign) {\n        return { \n          valid: true, \n          licenseType,\n          days: parseInt(days),\n          maxUses: parseInt(maxUses)\n        };\n      } else {\n        return { valid: false, reason: 'invalid' };\n      }\n    } else {\n      // 兼容旧的激活码格式\n      return { valid: false, reason: 'format' };\n    }\n  } catch {\n    return { valid: false, reason: 'format' };\n  }\n}\n\nfunction getCodeUsageInfo(code) {\n  // 获取激活码使用信息\n  const usageInfo = JSON.parse(localStorage.getItem('codeUsage') || '{}');\n  return usageInfo[code] || null;\n}\n\nfunction updateCodeUsage(code, activationDate) {\n  // 更新激活码使用信息\n  const usageInfo = JSON.parse(localStorage.getItem('codeUsage') || '{}');\n  \n  if (!usageInfo[code]) {\n    // 第一次使用\n    usageInfo[code] = {\n      firstActivation: activationDate,\n      useCount: 1,\n      lastUsed: activationDate\n    };\n  } else {\n    // 后续使用\n    usageInfo[code].useCount += 1;\n    usageInfo[code].lastUsed = activationDate;\n  }\n  \n  localStorage.setItem('codeUsage', JSON.stringify(usageInfo));\n  return usageInfo[code];\n}\n\nfunction checkCodeValidity(code, maxUses, maxDays) {\n  // 检查激活码是否还能使用\n  const usageInfo = getCodeUsageInfo(code);\n  \n  if (!usageInfo) {\n    return { canUse: true, reason: 'first_use' };\n  }\n  \n  if (usageInfo.useCount >= maxUses) {\n    return { canUse: false, reason: 'max_uses_reached', useCount: usageInfo.useCount };\n  }\n  \n  // 检查是否过期（基于第一次激活时间）\n  const firstActivation = new Date(usageInfo.firstActivation);\n  const now = new Date();\n  const daysSinceFirstActivation = Math.floor((now - firstActivation) / (1000 * 60 * 60 * 24));\n  \n  if (daysSinceFirstActivation >= maxDays) {\n    return { canUse: false, reason: 'expired', firstActivation: usageInfo.firstActivation };\n  }\n  \n  return { \n    canUse: true, \n    reason: 'valid', \n    useCount: usageInfo.useCount,\n    firstActivation: usageInfo.firstActivation,\n    daysLeft: maxDays - daysSinceFirstActivation\n  };\n}\n\nfunction getTrialInfo() {\n  let trialStart = localStorage.getItem('trialStart');\n  if (!trialStart) {\n    trialStart = new Date().toISOString();\n    localStorage.setItem('trialStart', trialStart);\n  }\n  const start = new Date(trialStart);\n  const now = new Date();\n  const diff = Math.floor((now - start) / (1000 * 60 * 60 * 24));\n  const left = TRIAL_DAYS - diff;\n  const expireDate = new Date(start.getTime() + TRIAL_DAYS * 24 * 60 * 60 * 1000);\n  return { left, expireDate };\n}\n\nexport default function LicenseModal({ visible, onActivated, onClose }) {\n  const [input, setInput] = useState('');\n  const [status, setStatus] = useState('');\n  const [activated, setActivated] = useState(false);\n  const [expireDate, setExpireDate] = useState(null);\n  const [trial, setTrial] = useState(getTrialInfo());\n\n  useEffect(() => {\n    // 检查本地激活状态\n    const lic = localStorage.getItem('license');\n    if (lic) {\n      const res = verifyCode(lic);\n      if (res.valid) {\n        setActivated(true);\n        // 计算到期日期\n        const usageInfo = getCodeUsageInfo(lic);\n        if (usageInfo) {\n          const firstActivation = new Date(usageInfo.firstActivation);\n          const expireDt = new Date(firstActivation.getTime() + res.days * 24 * 60 * 60 * 1000);\n          setExpireDate(expireDt.toISOString().split('T')[0]);\n          if (onActivated) onActivated(expireDt.toISOString().split('T')[0]);\n        }\n      } else {\n        setActivated(false);\n        setExpireDate(null);\n      }\n    }\n  }, [visible]);\n\n  const handleActivate = () => {\n    const code = input.trim();\n    \n    // 验证激活码格式\n    const res = verifyCode(code);\n    if (!res.valid) {\n      setStatus('fail');\n      return;\n    }\n    \n    // 检查激活码使用情况\n    const validity = checkCodeValidity(code, res.maxUses, res.days);\n    if (!validity.canUse) {\n      if (validity.reason === 'max_uses_reached') {\n        setStatus('max_uses');\n      } else if (validity.reason === 'expired') {\n        setStatus('expired');\n        setExpireDate(validity.firstActivation);\n      }\n      return;\n    }\n    \n    // 激活成功\n    const activationDate = new Date().toISOString().split('T')[0];\n    updateCodeUsage(code, activationDate);\n    \n    // 保存激活信息\n    localStorage.setItem('license', code);\n    localStorage.setItem('activationDate', activationDate);\n    localStorage.setItem('licenseType', res.licenseType);\n    \n    // 计算到期日期\n    const firstActivation = validity.firstActivation || activationDate;\n    const firstActivationDt = new Date(firstActivation);\n    const expireDt = new Date(firstActivationDt.getTime() + res.days * 24 * 60 * 60 * 1000);\n    const expireDateStr = expireDt.toISOString().split('T')[0];\n    \n    setActivated(true);\n    setExpireDate(expireDateStr);\n    setStatus('success');\n    if (onActivated) onActivated(expireDateStr);\n  };\n\n  // 试用到期判断\n  const trialExpired = trial.left <= 0;\n\n  if (!visible) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30\">\n      <div className=\"bg-white rounded-2xl shadow-2xl p-8 w-[90vw] max-w-xs border border-gray-100 relative\">\n        <h2 className=\"text-lg font-semibold text-center mb-2 text-gray-700\">软件激活</h2>\n        {activated ? (\n          <div className=\"text-green-600 text-center mb-4\">\n            已激活，有效期至 <b>{expireDate}</b>\n          </div>\n        ) : trialExpired ? (\n          <div className=\"text-red-500 text-center mb-4\">试用已到期，请输入激活码</div>\n        ) : (\n          <div className=\"text-gray-500 text-center mb-4\">\n            当前为试用版，剩余 <b>{trial.left}</b> 天<br />\n            到期后需输入激活码继续使用\n          </div>\n        )}\n        {!activated && (\n          <>\n            <input\n              className=\"w-full border rounded px-3 py-2 mb-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\"\n              placeholder=\"请输入激活码\"\n              value={input}\n              onChange={e => setInput(e.target.value)}\n              disabled={activated}\n            />\n            <button\n              className=\"w-full bg-blue-500 text-white rounded py-2 font-medium hover:bg-blue-600 transition mb-2\"\n              onClick={handleActivate}\n              disabled={activated}\n            >激活</button>\n            {status === 'success' && <div className=\"text-green-600 text-center text-xs\">激活成功！</div>}\n            {status === 'fail' && <div className=\"text-red-500 text-center text-xs\">激活码无效</div>}\n            {status === 'expired' && <div className=\"text-orange-500 text-center text-xs\">激活码已过期</div>}\n            {status === 'max_uses' && <div className=\"text-red-500 text-center text-xs\">激活码使用次数已达上限（3次）</div>}\n          </>\n        )}\n        {activated && (\n          <button className=\"absolute top-2 right-2 text-gray-400 hover:text-blue-500\" onClick={onClose}>\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}