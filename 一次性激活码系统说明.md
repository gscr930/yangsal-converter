# å¤®è¨å°”è—æ–‡ç¼–ç è½¬æ¢å™¨ - ä¸€æ¬¡æ€§æ¿€æ´»ç ç³»ç»Ÿ

## ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿå®ç°äº†çœŸæ­£çš„ä¸€æ¬¡æ€§æ¿€æ´»ç åŠŸèƒ½ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### ğŸ” å®‰å…¨æ€§ç‰¹æ€§
- **ä¸€æ¬¡æ€§ä½¿ç”¨**ï¼šæ¯ä¸ªæ¿€æ´»ç åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ¿€æ´»åç«‹å³å¤±æ•ˆ
- **é˜²é‡å¤æ¿€æ´»**ï¼šå³ä½¿æ¢ç”µè„‘ã€æ¢æµè§ˆå™¨ä¹Ÿæ— æ³•é‡å¤ä½¿ç”¨
- **æœ¬åœ°éªŒè¯**ï¼šæ— éœ€ç½‘ç»œè¿æ¥ï¼Œå®Œå…¨æœ¬åœ°éªŒè¯
- **æ—¶é—´æ§åˆ¶**ï¼šä»æ¿€æ´»å½“å¤©å¼€å§‹è®¡æ—¶ï¼Œåˆ°æœŸè‡ªåŠ¨å¤±æ•ˆ

### ğŸ“… æ—¶é—´ç®¡ç†
- **æ¿€æ´»æ—¥æœŸ**ï¼šç”¨æˆ·è¾“å…¥æ¿€æ´»ç çš„å½“å¤©
- **æœ‰æ•ˆæœŸ**ï¼šä»æ¿€æ´»æ—¥æœŸå¼€å§‹è®¡ç®—ï¼ˆè¯•ç”¨ç‰ˆ30å¤©ï¼Œå¹´åº¦ç‰ˆ365å¤©ï¼‰
- **åˆ°æœŸå¤„ç†**ï¼šåˆ°æœŸåè½¯ä»¶åŠŸèƒ½å—é™ï¼Œéœ€è¦æ–°çš„æ¿€æ´»ç 

## æ¿€æ´»ç æ ¼å¼

### æ•°æ®ç»“æ„
```
æ¿€æ´»æ—¥æœŸ|åˆ°æœŸæ—¥æœŸ|è®¸å¯è¯ç±»å‹|ç­¾å
```

### ç¤ºä¾‹
```
2025-07-10|2025-08-09|trial|a868b863012bb4aa
```

### ç¼–ç æ–¹å¼
- ä½¿ç”¨Base64ç¼–ç 
- ç‰¹æ®Šå­—ç¬¦æ›¿æ¢ï¼š`+` â†’ `-`ï¼Œ`/` â†’ `_`ï¼Œ`=` â†’ ç§»é™¤

## æŠ€æœ¯å®ç°

### 1. æ¿€æ´»ç ç”Ÿæˆ
```python
# ç”Ÿæˆè„šæœ¬ï¼šgenerate_codes.py
def generate_activation_code(license_type, days, activation_date=None):
    # è®¡ç®—åˆ°æœŸæ—¥æœŸ
    expire_date = activation_date + timedelta(days=days)
    
    # åˆ›å»ºæ•°æ®åŒ…
    data = f"{activation_date}|{expire_date}|{license_type}"
    
    # ç”ŸæˆHMACç­¾å
    signature = hmac.new(SECRET, data, hashlib.sha256).hexdigest()[:16]
    
    # ç»„åˆå¹¶ç¼–ç 
    combined = f"{data}|{signature}"
    return base64_encode(combined)
```

### 2. å‰ç«¯éªŒè¯
```javascript
// éªŒè¯é€»è¾‘ï¼šLicenseModal.jsx
function verifyCode(inputCode) {
    // è§£ç æ¿€æ´»ç 
    const decoded = atob(inputCode.replace(/-/g, '+').replace(/_/g, '/'));
    const [activationDate, expireDate, licenseType, sign] = decoded.split('|');
    
    // éªŒè¯ç­¾å
    const data = `${activationDate}|${expireDate}|${licenseType}`;
    const expectedSign = CryptoJS.HmacSHA256(data, SECRET).toString().slice(0, 16);
    
    // æ£€æŸ¥æœ‰æ•ˆæœŸ
    const now = new Date();
    const exp = new Date(expireDate);
    return now <= exp;
}
```

### 3. é˜²é‡å¤ä½¿ç”¨æœºåˆ¶
```javascript
// æ£€æŸ¥æ¿€æ´»ç æ˜¯å¦å·²è¢«ä½¿ç”¨
function checkCodeUsage(code) {
    const usedCodes = JSON.parse(localStorage.getItem('usedCodes') || '[]');
    return usedCodes.includes(code);
}

// æ ‡è®°æ¿€æ´»ç ä¸ºå·²ä½¿ç”¨
function markCodeAsUsed(code) {
    const usedCodes = JSON.parse(localStorage.getItem('usedCodes') || '[]');
    if (!usedCodes.includes(code)) {
        usedCodes.push(code);
        localStorage.setItem('usedCodes', JSON.stringify(usedCodes));
    }
}
```

## ä½¿ç”¨æµç¨‹

### 1. ç”¨æˆ·æ¿€æ´»æµç¨‹
1. ç”¨æˆ·è·å¾—æ¿€æ´»ç 
2. åœ¨è½¯ä»¶ä¸­è¾“å…¥æ¿€æ´»ç 
3. ç³»ç»ŸéªŒè¯æ¿€æ´»ç æœ‰æ•ˆæ€§
4. æ£€æŸ¥æ¿€æ´»ç æ˜¯å¦å·²è¢«ä½¿ç”¨
5. æ¿€æ´»æˆåŠŸï¼Œæ ‡è®°æ¿€æ´»ç ä¸ºå·²ä½¿ç”¨
6. ä¿å­˜æ¿€æ´»ä¿¡æ¯åˆ°æœ¬åœ°å­˜å‚¨

### 2. æ¿€æ´»ç éªŒè¯æµç¨‹
1. è§£ç æ¿€æ´»ç è·å–ä¿¡æ¯
2. éªŒè¯HMACç­¾å
3. æ£€æŸ¥æ¿€æ´»ç æ˜¯å¦å·²è¢«ä½¿ç”¨
4. éªŒè¯å½“å‰æ—¶é—´æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…
5. è¿”å›éªŒè¯ç»“æœ

### 3. åˆ°æœŸå¤„ç†
1. è½¯ä»¶å¯åŠ¨æ—¶æ£€æŸ¥æ¿€æ´»çŠ¶æ€
2. å¦‚æœå·²æ¿€æ´»ï¼Œæ£€æŸ¥æ˜¯å¦è¿‡æœŸ
3. å¦‚æœè¿‡æœŸï¼Œæ˜¾ç¤ºåˆ°æœŸæç¤º
4. é™åˆ¶è½¯ä»¶åŠŸèƒ½ï¼Œè¦æ±‚é‡æ–°æ¿€æ´»

## æ–‡ä»¶è¯´æ˜

### ç”Ÿæˆçš„æ–‡ä»¶
- `trial_codes.txt` - è¯•ç”¨ç‰ˆæ¿€æ´»ç ï¼ˆ1000ä¸ªï¼‰
- `yearly_codes.txt` - å¹´åº¦ç‰ˆæ¿€æ´»ç ï¼ˆ1000ä¸ªï¼‰
- `activation_codes.json` - JSONæ ¼å¼æ¿€æ´»ç æ•°æ®

### ä»£ç æ–‡ä»¶
- `generate_codes.py` - æ¿€æ´»ç ç”Ÿæˆè„šæœ¬
- `src/components/LicenseModal.jsx` - æ¿€æ´»ç•Œé¢ç»„ä»¶
- `test_activation.py` - æ¿€æ´»ç æµ‹è¯•è„šæœ¬

## å®‰å…¨ä¼˜åŠ¿

### âœ… é˜²ç ´è§£
- HMACç­¾åé˜²æ­¢ç¯¡æ”¹
- æœ¬åœ°å­˜å‚¨é˜²æ­¢ç½‘ç»œæ”»å‡»
- ä¸€æ¬¡æ€§ä½¿ç”¨é˜²æ­¢é‡å¤æ¿€æ´»

### âœ… ç”¨æˆ·ä½“éªŒ
- æ— éœ€ç½‘ç»œè¿æ¥
- æ¿€æ´»è¿‡ç¨‹ç®€å•å¿«é€Ÿ
- åˆ°æœŸæé†’æ¸…æ™°æ˜ç¡®

### âœ… å•†ä¸šä¿æŠ¤
- é˜²æ­¢æ¿€æ´»ç æ³„éœ²
- æ§åˆ¶è½¯ä»¶ä½¿ç”¨æœŸé™
- æ”¯æŒæ‰¹é‡ç”Ÿæˆå’Œåˆ†å‘

## æµ‹è¯•æ–¹æ³•

### 1. ç”Ÿæˆæµ‹è¯•æ¿€æ´»ç 
```bash
python3 generate_codes.py
```

### 2. éªŒè¯æ¿€æ´»ç æ ¼å¼
```bash
python3 test_activation.py
```

### 3. å‰ç«¯æµ‹è¯•
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`npm start`
2. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`
3. æµ‹è¯•æ¿€æ´»æµç¨‹
4. æµ‹è¯•é‡å¤æ¿€æ´»ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
5. æµ‹è¯•è¿‡æœŸæ¿€æ´»ç 

## æ³¨æ„äº‹é¡¹

1. **æ¿€æ´»ç å®‰å…¨**ï¼šæ¿€æ´»ç ç”Ÿæˆååº”å¦¥å–„ä¿ç®¡ï¼Œé¿å…æ³„éœ²
2. **æœ¬åœ°å­˜å‚¨**ï¼šæ¿€æ´»ä¿¡æ¯å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œæ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šä¸¢å¤±æ¿€æ´»çŠ¶æ€
3. **æ—¶é—´åŒæ­¥**ï¼šå»ºè®®ç”¨æˆ·ç¡®ä¿ç³»ç»Ÿæ—¶é—´å‡†ç¡®ï¼Œé¿å…æ¿€æ´»é—®é¢˜
4. **å¤‡ä»½æ¢å¤**ï¼šé‡è¦æ¿€æ´»ç å»ºè®®å¤‡ä»½ï¼Œä»¥é˜²æ„å¤–ä¸¢å¤±

## æ‰©å±•åŠŸèƒ½

### æœªæ¥å¯èƒ½çš„æ”¹è¿›
- æ·»åŠ æ¿€æ´»ç é»‘åå•åŠŸèƒ½
- æ”¯æŒæ¿€æ´»ç ç»­æœŸåŠŸèƒ½
- æ·»åŠ æ¿€æ´»ç»Ÿè®¡å’ŒæŠ¥å‘Š
- æ”¯æŒå¤šè®¾å¤‡æ¿€æ´»é™åˆ¶
- æ·»åŠ æ¿€æ´»ç æ‰¹é‡ç®¡ç†å·¥å…· 